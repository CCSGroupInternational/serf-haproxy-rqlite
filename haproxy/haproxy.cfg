global
    stats socket /tmp/haproxy.sock mode 660 level admin
    stats timeout 2m    # Wait up to 2 minutes for input

frontend http-rqlite
    bind 0.0.0.0:9080
    mode http
    option httplog
    log /dev/log local0 info
    acl host-is-rqlite-cluster   hdr(host) eq rqlite-cluster.localhost
    use_backend rqlite-backend if host-is-rqlite-cluster
    timeout client          1m


backend rqlite-backend
    mode http
    timeout connect         10s
    timeout server          1m
    server-template rqlitesrv 1-100 127.0.10.1:8080 check disabled
